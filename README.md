# Create a Reason Record from Json

* the goal of this project is to be able to use the the lab.json and theme.json files generated by [compositor.io](www.compositor.io)'s [lab](https://github.com/c8r/lab) project in a reasonml project.

## Questions

* Decoding with bs-json returns a reason record type. Right?

## StringMap Syntax fix:

* see: https://reasonml.chat/t/using-json-in-reason-with-belt/360/7?u=idkjs

- implemented in src/DemoMap.re
- This seems to work when operating straight of the raw json in Demo.x. If you decode to a record it works with component.name syntax as seen in src/Lab.components getComponentMap ().

```
let getComponentMap = myList =>
  List.fold_left(
    (map, component) => StringMap.add(component##name, component, map),
    StringMap.empty,
    myList,
  );
```

## Working Variant foolishness

* It works but there must be a better way. See src/labDemoVariants.re

## ComponentDecode.re

* What is the relationship between Json.Decode a Belt.list type. Getting this error ComponentDecode.re

```
  We've found a bug for you!
  /Users/prisc_000/code/BHYV/lab2record/src/ComponentDecode.re 68:15-30

  66 │   json |> Json.Decode.list(decodeComponent);
  67 │
  68 │ components |> decodeComponents |> Js.log;

  This has type:
    Js.Json.t => Lab2record.Types.components
  But somewhere wanted:
    Belt.List.t('a) => 'b

  The incompatible parts:
    Js.Json.t (defined as Js.Json.t)
    vs
    Belt.List.t('a) (defined as list('a))

ninja: build stopped: subcommand failed.
```
